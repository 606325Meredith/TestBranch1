<apex:page standardController="Local_Strategy__c" extensions="LocalInitiativeReltdListContrlr" standardStylesheets="true">
    <apex:form >
        
   <script>
        function closeWindow() {            
            window.close();
        }
    </script>
        <apex:Pageblock >
         <apex:outputPanel id="errmsg">
         <apex:pageMessages id="message1"/>
      
         </apex:outputPanel>
            <apex:pageBlockButtons location="top">              
                <apex:commandButton value="New Local Initiative" onclick="window.top.location='/apex/LocalErrorPage?strategyID={!Local_Strategy__c.id}'; return false"/>
                <apex:commandButton value="View All Local Initiatives" onclick="window.top.location='/apex/LocalStrategyRelatedList?Id={!Local_Strategy__c.id}'; return false"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection columns="1">

                <apex:pageBlockTable value="{!Initiative}" var="Ini" rendered="{!(Initiative.size > 0)}" id="detail">
                        <apex:column headerValue="Action" width="180px">
                              
                            <a href="/apex/LocalErrorPage?id={!Ini.id}" onclick="window.top.location='/apex/LocalErrorPage?id={!Ini.id}'; return false" target="_parent">Allocate</a>
                                |&nbsp;
                            <a href="/{!Ini.id}" onclick="window.open='/{!Ini.id}';" target="_parent">View Details</a>
                            <apex:outputPanel rendered="{!Checkpermissions}">
                                |&nbsp;
                                <apex:commandLink value="Delete" action="{!deleteInitiatives}" target="_self" reRender="errmsg,detail">
                                      <apex:param value="{!Ini.id}" name="recordId2" assignTo="{!recordId2}"/>
                                </apex:commandLink>
                            </apex:outputPanel>
                        </apex:column>
                          
                        <!--<apex:column value="{!Ini.Name}" headerValue="Local Initiative Name"/>  -->
                        <apex:column value="{!Ini.Initiatives__c}" headerValue="Initiative"/>
                        <apex:column value="{!Ini.Objectives__c}" headerValue="Objective"/>
                        <apex:column value="{!Ini.Target__c}" headerValue="Target"/>
                        <apex:column value="{!Ini.Unit_of_Measure__c}" headerValue="Unit Of Measure"/>
                        <apex:column value="{!Ini.Initiative_Start_Date__c}" headerValue="Start Date"/>
                        <apex:column value="{!Ini.Initiative_End_Date__c}" headerValue="End Date"/>
                        <apex:column value="{!Ini.Priority__c}" headerValue="Priority"/>
                        <apex:column value="{!Ini.Bonus_Eligibility__c}" headerValue="Bonus"/>
                        <apex:column value="{!Ini.Active__c}" headerValue="Active"/>
                        <apex:column value="{!Ini.Comments__c}" headerValue="Comments"/>
                        <apex:column value="{!Ini.Product_SKU__c}" headerValue="Product"/>
                        <apex:column value="{!Ini.Product_Group__c}" headerValue="Product Group"/>
                        <apex:column value="{!Ini.Brand__c}" headerValue="Brand"/>
                        <apex:column value="{!Ini.Local_Banner_Allocations__r.size}" headerValue="# of Allocations"/>
                    </apex:pageBlockTable>  
                         
               </apex:pageBlockSection>
               <apex:pageBlockSection columns="1">
                   <apex:outputText rendered="{!(Initiative.size = 0)}" value="No records to display" /> 
               </apex:pageBlockSection> 

        </apex:Pageblock>
    </apex:form> 
</apex:page>